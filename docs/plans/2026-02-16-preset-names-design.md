# 作業時間プリセット名機能 デザインドキュメント

## 概要

作業時間にプロジェクト名のプリセットを付与し、プリセット別に作業時間を記録・表示する機能。

## 要件

- プリセットはプロジェクト名（例：「iruka-kun」「仕事A」「副業」）
- メニューバーから直接追加・選択
- 作業中でもプリセット切り替え可能（切り替え前の時間は前のプリセットに記録）
- メニューとオーバーレイの両方にプリセット名を表示
- 日別×プリセット別に永続化
- 後方互換性は不要

## アプローチ

WorkTracker にプリセット概念を内蔵し、WorkHistoryStore のデータ構造を拡張する。

## データモデル

### WorkHistoryStore

- 保存キー: `"iruka_work_history_v2"`
- 保存形式: `[String: [String: TimeInterval]]`
  - 外キー: 日付 (`"2026-02-16"`)
  - 内キー: プリセット名 (`"iruka-kun"`)
- プリセット一覧キー: `"iruka_presets"`
- プリセット一覧形式: `[String]`

### WorkTracker

- `currentPreset: String?` — 現在選択中のプリセット（nil = 未選択）
- `switchPreset(_:)` — 作業中なら経過時間を現プリセットに保存し、新プリセットで計測継続
- `stop()` 時に `currentPreset` のキーで保存

## メニュー構成

```
🐟 0:05:23
├── ⏸ 作業を中断
├── ──────────
├── 📂 iruka-kun  ✓    ← 現在選択中
├── 📂 仕事A
├── 📂 副業
├── ──────────
├── ＋ プリセットを追加...   ← NSAlert テキスト入力
├── ──────────
├── 今日の合計: 2:30:00
│   ├── iruka-kun: 1:00:00
│   ├── 仕事A: 0:45:00
│   └── 副業: 0:45:00
├── ──────────
├── 設定...
├── イルカくんについて
└── 終了
```

## オーバーレイ表示

```
[iruka-kun 0:05:23]
```

プリセット未選択時は従来通り時間のみ表示。

## フロー

1. メニューからプリセット選択
2. 「作業を開始」→ 選択中プリセットで計測開始
3. 作業中にプリセット切り替え → 経過時間を前プリセットに保存、新プリセットで計測継続
4. 「作業を中断」→ 経過時間を現プリセットに保存
